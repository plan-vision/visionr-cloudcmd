!function(e){function t(t){for(var r,a,i=t[0],l=t[1],c=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={20:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([40,0]),n()}({137:function(e,t){},161:function(e,t){},162:function(e,t){},163:function(e,t){},25:function(e,t,n){"use strict";async function r(e){if(!navigator.serviceWorker)return;const t="https:"===location.protocol,n="localhost"===location.hostname;return t||n?navigator.serviceWorker.register(e+"/sw.js"):void 0}e.exports.registerSW=r,e.exports.unregisterSW=async function(e){const t=await r(e);t&&t.unregister(e)},e.exports.listenSW=(e,...t)=>{e&&e.addEventListener(...t)}},40:function(e,t,n){"use strict";n(137),n(161),n(162),n(163);const r=n(8),o=n(5),{registerSW:s,listenSW:a}=n(25);function i(e){return e?e.indexOf("/")?"/"+e:e:""}window.Emitify=n(20),e.exports=window.CloudCmd=e=>{window.Util=n(10),window.CloudFunc=n(6);const t=n(11);window.DOM=t,window.CloudCmd=n(64),async function(e){const{prefix:t}=e,n=await s(t);a(n,"updatefound",l(e))}(e),n(67),n(70),n(78);const r=i(e.prefix);window.CloudCmd.init(r,e)};const l=r(async e=>{const{DOM:t}=window,n=i(e.prefix);await o.js(n+"/dist/cloudcmd.common.js"),await o.js(n+"/dist/cloudcmd.js"),console.log("cloudcmd: sw: updated"),t.Events.removeAll(),window.CloudCmd(e)})},64:function(e,t,n){"use strict";const r=n(20),o=n(30),s=n(14),a=n(5),i=n(3),l=n(32),c=n(1),{unregisterSW:u}=n(25),d=n(65),f=n(0),{apiURL:p,formatMsg:C,buildFromJSON:m}=n(6),h=n(66);function D(e){let t;r.call(this);const n=this,o=e.CurrentInfo,{Storage:D,Files:g}=e;this.log=(...e)=>{},this.prefix="",this.prefixSocket="",this.prefixURL="",this.DIRCLIENT="/dist/",this.DIRCLIENT_MODULES=this.DIRCLIENT+"modules/",this.MIN_ONE_PANEL_WIDTH=1155,this.HOST=location.origin||location.protocol+"//"+location.host;this.TITLE="Cloud Commander",this.sort={left:"name",right:"name"},this.order={left:"asc",right:"asc"},this.loadDir=async t=>{const r=t,a=r.isRefresh,{panel:i,history:l,noCurrent:u,currentName:d}=r;let f,p;!u&&i&&i!==o.panel&&(e.changePanel(),f=!0),(f||a||!l)&&(p="top"),c.show.load(p,i),await async function(t,r={},a){const{RESTful:i}=e;n.log('reading dir: "'+t+'";');const l=n.config("dirStorage")&&await D.get(t),c=r.currentName||o.name,{noCurrent:u,refresh:d}=r;if(!d&&l)return await M(l,a,r);const f=e.getPanelPosition(a),p=n.sort[f],C=n.order[f],m=s("?sort={{ sort }}&order={{ order }}",{sort:p,order:C}),[,h]=await i.read(t+m,"json");if(!h)return;r.sort=p,r.order=C,await M(h,a,r),d&&!u&&e.setCurrentByName(c);if(!n.config("dirStorage"))return;D.set(t,h)}(r.path,{refresh:a,history:l,noCurrent:u,currentName:d},i)},this.init=async(r,o)=>{n.prefix=r,n.prefixURL=`${r}${p}`,n.prefixSocket=o.prefixSocket,n.config=e=>o[e],n.config.if=f((e,t,n)=>o[e]&&t(n)),n._config=(e,t)=>{"password"!==e&&(o[e]=t)},o.oneFilePanel&&(n.MIN_ONE_PANEL_WIDTH=1/0),document.body.scrollIntoViewIfNeeded||await a.js(r+n.DIRCLIENT_MODULES+"polyfill.js"),await w(),await async function(){const r=e.getFiles();n.on("current-file",e.updateCurrentInfo),n.on("current-name",O);const o=await D.get("current-name"),s=o&&e.getCurrentByName(o)||r[0];r&&e.setCurrentFile(s,{history:!location.hash});const a=e.getCurrentDirPath();t=n.Listeners,t.init();if(y().forEach(t.setOnPanel),t.initKeysPanel(),!n.config("dirStorage"))return;await D.get(a)||await D.set(a,d())}(),await async function(){const{prefix:e}=n,t=e+"/dist/cloudcmd.common.css";await a.css(t)}(),n.route(location.hash)},this.route=t=>{const r=t.split("/");if(!t)return;const[o]=r,s=l(o.slice(1)).replace(/.js$/,"");const a=r[1],i=e.getCurrentByName(a);if(!a||i)e.setCurrentFile(i),n.execFromModule(s,"show");else{const e=C("set current file",a,"error");n.log(e)}},this.logOut=async()=>{const t=n.prefix+"/logout",{prefix:r}=n;await e.Storage.clear(),u(r),e.load.ajax({url:t,error:()=>document.location.reload()})};const w=async()=>{n.Key=new n.Key,n.Key.bind();const[,e]=await i(g.get,"modules"),t=c.show.load,r={edit:t,menu:t};if(e)for(const t of e.local)h({name:null,path:t,dobefore:r[t]})};async function O(e){await D.set("current-name",e)}function y(){const e=["left"];return n.config("oneFilePanel")?e:[...e,"right"]}async function M(r,s,a){const{history:l,noCurrent:c}=a,[u,[d,f,p,C]]=await i(g.get,["file","path","link","pathLink"]);if(u)return e.Dialog.alert(u.responseText);const h=s||e.getPanel(),{prefix:D}=n,{dir:w,name:O}=o,{childNodes:y}=h;let M=y.length;for(;M--;)h.removeChild(h.lastChild);if(h.innerHTML=m({sort:a.sort,order:a.order,data:r,id:h.id,prefix:D,template:{file:d,path:f,pathLink:C,link:p}}),t.setOnPanel(h),!c){let t;".."===O&&"/"!==w&&(t=e.getCurrentByName(w)),t||([t]=e.getFiles(h)),e.setCurrentFile(t,{history:l}),n.emit("active-dir",o.dirPath)}}this.execFromModule=async(e,t,...r)=>{await n[e]();(0,n[e][t])(...r)},this.refresh=async(t={})=>{const{panel:r=o.panel,currentName:s}=t,a=e.getCurrentDirPath(r),i=!!t&&t.noCurrent;await n.loadDir({path:a,isRefresh:!0,history:!1,panel:r,noCurrent:i,currentName:s})},this.goToParentDir=async()=>{const{dir:t,dirPath:r,parentDirPath:s,panel:a}=o;if(r===s)return;const i=s;await n.loadDir({path:i});const l=e.getCurrentByName(t),[c]=e.getFiles(a);e.setCurrentFile(l||c,{history:history})}}o(D,r),e.exports=new D(DOM),a.addErrorListener((e,t)=>{const n=`file ${t} could not be loaded`;c.show.error(n)})},65:function(e,t,n){"use strict";const r=DOM.CurrentInfo;e.exports=()=>({path:DOM.getCurrentDirPath(),files:(r.files||[]).filter(e=>".."!==DOM.getCurrentName(e)).map(e=>{const t=DOM.getCurrentName(e),n=DOM.getCurrentSize(e),r=DOM.getCurrentOwner(e);return{name:t,size:n,mode:DOM.getCurrentMode(e),owner:r,date:DOM.getCurrentDate(e),type:DOM.getCurrentType(e)}})})},66:function(e,t,n){"use strict";const r=n(4),o=n(3),s=n(5).js,a=n(32);e.exports=function(e){if(!e)return;const{path:t}=e,n=t&&a(t).replace(/.js$/,"");const i=e.dobefore;CloudCmd[n]||(CloudCmd[n]=()=>{r(i);const{prefix:e}=CloudCmd,o=e+CloudCmd.DIRCLIENT_MODULES+t+".js";return s(o).then(async()=>{const e=async e=>e&&e(),t=CloudCmd[n];return Object.assign(e,t),CloudCmd[n]=e,CloudCmd.log("init",n),await t.init(),e})},CloudCmd[n].show=async(...e)=>{CloudCmd.log("show",n,e);const t=CloudCmd[n],[r,s]=await o(t);if(r)return console.error(r);await s.show(...e)})}},67:function(e,t,n){"use strict";const r=n(4),o=n(13),s=n(0),a=n(3),i=n(33),l=n(68),c=s(n(69)),u=n(34),{FS:d}=n(6),f=RegExp(String.fromCharCode(160),"g");e.exports.init=()=>{!function(){const e=DOM.getFM();m.addOnce("contextmenu",e,e=>{CloudCmd.Menu.show({x:e.clientX,y:e.clientY})}),m.addContextMenu(e,e=>{CloudCmd.Menu.ENABLED||e.preventDefault()})}(),function(){const e=DOM.getByClassAll("panel"),t=({target:e})=>{e.classList.add("selected-panel")},n=({target:e})=>{e.classList.remove("selected-panel")},r=e=>{const{files:t,items:n}=e.dataTransfer,{length:r}=t;if(e.preventDefault(),r&&(!n||!n.length||!n[0].webkitGetAsEntry))return u(t);const o=Array.from(n).filter(e=>"file"===e.kind);if(o.length)return DOM.uploadDirectory(o);const{Operation:s}=CloudCmd,a=e.shiftKey?"move":"copy";return s.show(a)},o=e=>{const{dataTransfer:t}=e,{effectAllowed:n}=t;/move|linkMove/.test(n)?t.dropEffect="move":t.dropEffect="copy",e.preventDefault()};for(const s of e)m.add("dragover",s,o).add("drop",s,r).add("dragenter",t).add(["dragleave","drop"],n)}(),DOM.Events.add(["unload","beforeunload"],e=>{const{Key:t}=CloudCmd;if(!t||!t.isBind())return e.preventDefault(),"Please make sure that you saved all work."}),m.add("popstate",async({state:e})=>{const t=(e||"").replace(d,"");if(!t)return CloudCmd.route(location.hash);await CloudCmd.loadDir({path:t,history:!1})}),m.add("resize",()=>{if(!(window.innerWidth<CloudCmd.MIN_ONE_PANEL_WIDTH))return;const{panel:e}=C;e&&("js-left"===e.getAttribute("data-name")||DOM.changePanel())}),async function(){const[,e]=await a(DOM.Files.get,"config"),t=e&&e.packer;D=DOM.getPackerExt(t)}(),function(){const e=DOM.getFM(),t=e=>e.dataset,n=e=>/^js-(left|right)$/.test(e.dataset.name);m.addClick(e,e=>{const r=e.target;if("js-fm-header"!==r.parentElement.dataset.name)return;const o=(r.dataset.name||"").replace("js-","");if(!/^(name|size|date)$/.test(o))return;const s=function e(t,n=[]){return t?e(t.parentElement,n.concat(t)):n}(r).filter(t).filter(n).pop();CloudCmd.sortPanel(o,s)})}()},CloudCmd.Listeners=e.exports;const p=s((e,t)=>{for(const n of e)n(t)}),C=DOM.CurrentInfo,{Events:m}=DOM,h={mousedown:r.with(O,(function(e){const t={alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey},n=y(e.target),r=C.name;DOM.setCurrentFile(n);const o=C.name;let s=[];t.shift?s=function(e,t){const n=DOM.getAllFiles(),r=DOM.getFilenames(n),o=c(r),s=o(e),a=o(t);return l(s,a,n)}(r,o):s.push(C.element);0===e.button&&function(e,t){const n=/Mac/.test(window.navigator.platform);if(!e)throw Error("key should not be undefined!");const[r]=t;if(n&&e.meta||e.ctrl)return DOM.toggleSelectedFile(r);if(e.shift)t.map(DOM.selectFile)}(t,s)})),click:p([function(e){e.preventDefault(),function(e){const{panel:t}=C,n=DOM.getByDataName("js-files",t);(function(e){for(;"UL"!==e.tagName;)e=e.parentElement;return e})(e)!==n&&DOM.changePanel()}(e.target)},e=>{const t=/Mac/.test(window.navigator.platform),{shiftKey:n,metaKey:r,ctrlKey:o}=e;n||t&&r||o||DOM.unselectFiles()}]),dragstart:r.with(O,(function(e){const{prefixURL:t}=CloudCmd,n=y(e.target),{isDir:r}=C;let o=DOM.getCurrentLink(n),s=DOM.getCurrentName(n);r&&(s+=D,o=document.createElement("a"),o.textContent=s,o.href=t+"/pack"+C.path+D);e.dataTransfer.setData("DownloadURL","application/octet-stream:"+s+":"+o)})),dblclick:r.with(O,(async function(e){const t=y(e.target),n=DOM.isCurrentIsDir(t),r=DOM.getCurrentPath(t);n?(await CloudCmd.loadDir({path:"/"===r?"/":r+"/"}),e.preventDefault()):(CloudCmd.View.show(),e.preventDefault())})),touchstart:r.with(O,(async function(e){const t=y(e.target);if(!DOM.isCurrentIsDir(t))return;if(!DOM.isCurrentFile(t))return;await CloudCmd.loadDir({path:DOM.getCurrentPath(t)})}))};let D;function g(){CloudCmd.UserMenu.show()}e.exports.initKeysPanel=()=>{const e=DOM.getById("js-keyspanel");e&&m.addClick(e,({target:e})=>{const{id:t}=e,n=e=>{const{Operation:t}=CloudCmd;return t.show.bind(null,e)},o={f1:CloudCmd.Help.show,f2:g,f3:CloudCmd.View.show,f4:CloudCmd.EditFile.show,f5:n("copy"),f6:n("move"),f7:DOM.promptNewDir,f8:n("delete"),f9:CloudCmd.Menu.show,f10:CloudCmd.Config.show,"~":CloudCmd.Konsole.show,"shift~":CloudCmd.Terminal.show,contact:CloudCmd.Contact.show};r(o[t])})};async function w(e,t){t.preventDefault();const n=t.target,r=n.getAttribute("data-name"),o=function(e){const t=C.panel;return!t||e.getAttribute("data-name")!==t.getAttribute("data-name")}(e);if("js-copy-path"===r)return s=n,void i.writeText(s.parentElement.title).then(CloudCmd.log).catch(CloudCmd.log);var s;if("js-refresh"===r)return CloudCmd.refresh({panel:e,noCurrent:o});if("js-path-link"!==r)return;const{href:a}=n,l=function(e){const t=CloudCmd.HOST,{prefix:n}=CloudCmd,r=RegExp("^"+n+d);return decodeURI(e).replace(t,"").replace(r,"").replace("%%","%25%").replace(f," ")||"/"}(a);await CloudCmd.loadDir({path:l,isRefresh:!1,panel:o?e:C.panel})}function O(e,t){const{target:n}=t,{tagName:r}=n;"UL"!==r&&e(t)}function y(e){if(!e)return e;for(;"LI"!==e.tagName;)e=e.parentElement;return e}e.exports.setOnPanel=e=>{const t=(e=>o.string(e)?DOM.getByDataName("js-"+e):e)(e),n=DOM.getByDataName("js-files",t),r=DOM.getByDataName("js-path",t);m.addClick(r,function(e){return w.bind(null,e)}(t)),m.add(n,h)}},68:function(e,t,n){"use strict";e.exports=(e,t,n)=>e<t?n.slice(e,t+1):e>t?n.slice(t,e+1):[n[e]]},69:function(e,t,n){"use strict";e.exports=(e,t)=>{const n=e.indexOf(t);return~n?n:0}},70:function(e,t,n){"use strict";const r=DOM.CurrentInfo,o=n(4),s=n(33),a=n(17),i=n(31),l=n(35),c=n(71),u=n(77),d=n(7)();d([]),p.prototype=l,CloudCmd.Key=p;const{loadDir:f}=CloudCmd;function p(){let e;const t=this;function n(e){return e.key?e.key:function(e){const t=e.substring(2),n=parseInt(t,16);return String.fromCharCode(n)}(e.keyIdentifier)}async function p(e){const{keyCode:a}=e;if(void 0===e.altKey)return;const p=e.altKey,C=e.ctrlKey,m=e.shiftKey,h=e.metaKey,D=a>=l.ZERO&&a<=l.Z,g=/Numpad/.test(e.code);let w=n(e),O=~[".","_","-","+","="].indexOf(w);if(O||(O=function(e,t){switch(t){case l.DOT:return".";case l.HYPHEN:return e?"_":"-";case l.EQUAL:return e?"+":"="}}(m,a),O&&(w=O)),!t.isBind())return;const y=CloudCmd.config("vim");if(!y&&!g&&!p&&!C&&!h&&(D||O))return u(w,d);d([]),await async function(e){let n,a,c,u,d,p=r.element;const{name:C,panel:m,path:h,isDir:D}=r,{Operation:g}=CloudCmd,{keyCode:w}=e,O=e.altKey,y=e.shiftKey,M=e.ctrlKey,v=e.metaKey,b=M||v;p&&(c=p.previousSibling,u=p.nextSibling);switch(w){case t.TAB:DOM.changePanel(),e.preventDefault();break;case t.INSERT:case t.INSERT_MAC:DOM.toggleSelectedFile(p).setCurrentFile(u);break;case t.DELETE:y?g.show("delete:silent"):g.show("delete");break;case t.ASTERISK:DOM.toggleAllSelectedFiles(p);break;case t.PLUS:DOM.expandSelection(),e.preventDefault();break;case t.MINUS:DOM.shrinkSelection(),e.preventDefault();break;case t.F1:CloudCmd.Help.show(),e.preventDefault();break;case t.F2:CloudCmd.UserMenu.show();break;case t.F3:r.isDir?await f({path:h}):y?CloudCmd.Markdown.show(h):b?CloudCmd.sortPanel("name"):CloudCmd.View.show(),e.preventDefault();break;case t.F4:y?CloudCmd.EditFileVim.show():CloudCmd.EditFile.show(),e.preventDefault();break;case t.F5:b?CloudCmd.sortPanel("date"):O?g.show("pack"):g.show("copy"),e.preventDefault();break;case t.F6:b?CloudCmd.sortPanel("size"):y?DOM.renameCurrent(p):g.show("move"),e.preventDefault();break;case t.F7:y?DOM.promptNewFile():DOM.promptNewDir(),e.preventDefault();break;case t.F8:g.show("delete"),e.preventDefault();break;case t.F9:O?g.show("extract"):CloudCmd.Menu.show(),e.preventDefault();break;case t.F10:CloudCmd.Config.show(),e.preventDefault();break;case t.TRA:if(e.preventDefault(),y)return CloudCmd.Terminal.show();CloudCmd.Konsole.show();break;case l.BRACKET_CLOSE:CloudCmd.Konsole.show(),e.preventDefault();break;case t.SPACE:a=!D||".."===C||DOM.isSelected(p),o.if(a,()=>{DOM.toggleSelectedFile(p)},e=>{DOM.loadCurrentSize(p,e)}),e.preventDefault();break;case t.U:b&&(DOM.swapPanels(),e.preventDefault());break;case t.UP:y&&DOM.toggleSelectedFile(p),DOM.setCurrentFile(c),e.preventDefault();break;case t.DOWN:y&&DOM.toggleSelectedFile(p),DOM.setCurrentFile(u),e.preventDefault();break;case t.LEFT:if(!O)return;e.preventDefault(),d=r.panel.getAttribute("data-name"),"js-right"===d&&DOM.duplicatePanel();break;case t.RIGHT:if(!O)return;e.preventDefault(),d=r.panel.getAttribute("data-name"),"js-left"===d&&DOM.duplicatePanel();break;case t.HOME:DOM.setCurrentFile(r.first),e.preventDefault();break;case t.END:DOM.setCurrentFile(r.last),e.preventDefault();break;case t.PAGE_DOWN:for(DOM.scrollByPages(m,1),n=0;n<30&&p.nextSibling;n++)p=p.nextSibling;DOM.setCurrentFile(p),e.preventDefault();break;case t.PAGE_UP:for(DOM.scrollByPages(m,-1),n=0;n<30&&p.previousSibling;n++)p=p.previousSibling;DOM.setCurrentFile(p),e.preventDefault();break;case t.ENTER:r.isDir?await f({path:h}):CloudCmd.View.show();break;case t.BACKSPACE:CloudCmd.goToParentDir(),e.preventDefault();break;case t.BACKSLASH:b&&await f({path:"/"});break;case t.A:b&&(DOM.selectAllFiles(),e.preventDefault());break;case t.G:O&&(DOM.goToDirectory(),e.preventDefault());break;case t.M:b&&(y?CloudCmd.EditNamesVim.show():CloudCmd.EditNames.show(),e.preventDefault());break;case t.P:if(!b)return;e.preventDefault(),s.writeText(r.dirPath).catch(CloudCmd.log);break;case t.R:b&&(CloudCmd.log("reloading page...\n"),CloudCmd.refresh(),e.preventDefault());break;case t.C:b&&i.copy();break;case t.X:b&&i.cut();break;case t.V:b&&i.paste();break;case t.Z:b&&i.clear();break;case t.D:b&&(CloudCmd.log("clearing storage..."),await DOM.Storage.clear(),CloudCmd.log("storage cleared"),e.preventDefault())}}(e),a>=l.F1&&a<=l.F10||y&&c(w,e)}this.isBind=()=>e,this.setBind=()=>{e=!0},this.unsetBind=()=>{e=!1},this.bind=()=>{a.addKey(p,!0),e=!0}}},71:function(e,t,n){"use strict";const r=n(72),o=n(73),s=DOM.CurrentInfo,{Dialog:a}=DOM;e.exports=async(e,t)=>{const n=i(t);await r(e,n)};const i=e=>({escape:DOM.unselectFiles,remove:()=>{CloudCmd.Operation.show("delete")},copy:()=>{DOM.Buffer.copy(),DOM.unselectFiles()},select:()=>{const e=s.element;DOM.toggleSelectedFile(e)},paste:DOM.Buffer.paste,moveNext:({count:e,isVisual:t,isDelete:n})=>{c("next",{count:e,isVisual:t,isDelete:n})},movePrevious:({count:e,isVisual:t,isDelete:n})=>{c("previous",{count:e,isVisual:t,isDelete:n})},find:async()=>{e.preventDefault();const[,t]=await a.prompt("Find","");if(!t)return;const n=s.files.map(DOM.getCurrentName),[r]=o.find(t,n);DOM.setCurrentByName(r)},findNext:()=>{const e=o.findNext();DOM.setCurrentByName(e)},findPrevious:()=>{const e=o.findPrevious();DOM.setCurrentByName(e)}});function l(e){".."!==DOM.getCurrentName(e)&&DOM.selectFile(e)}function c(e,{count:t,isVisual:n,isDelete:r}){let o=s.element;const a=n?l:DOM.unselectFile;a(o);const i=e+"Sibling";for(let e=0;e<t;e++){const e=o[i];if(!e)break;o=e,a(o)}DOM.setCurrentFile(o),r&&CloudCmd.Operation.show("delete")}e.exports.selectFile=l},72:function(e,t,n){"use strict";const r=n(7),o=r(""),s=r(!1),a=()=>{s(!1)},i=()=>{o("")},l=()=>{};function c(e){const t="d"===e[0];t&&(s(!0),e=e.split("").slice(1).join(""));var n;return{count:(n=e)?"g"===n?1:parseInt(n):1,isDelete:t,isVisual:s()}}e.exports=(e,t)=>{const n=o(),r=s(),u=o(n.concat(e)),{escape:d=l,moveNext:f=l,movePrevious:p=l,remove:C=l,copy:m=l,paste:h=l,select:D=l,find:g=l,findNext:w=l,findPrevious:O=l}=t;if("Enter"===e)return i();if("Escape"===e)return s(!1),d(),i();if("j"===e){const{count:e,isDelete:t,isVisual:r}=c(n);return!isNaN(e)&&f({count:e,isVisual:r,isDelete:t}),i()}if("k"===e){const{count:e,isDelete:t,isVisual:r}=c(n);return!isNaN(e)&&p({count:e,isVisual:r,isDelete:t}),i()}if(/^gg$/.test(u)){const{isDelete:e,isVisual:t}=c(n);return p({count:1/0,isVisual:t,isDelete:e}),i()}return"d"!==e||!s()&&"d"!==n?"G"===e?(f({count:1/0,isVisual:r}),i()):"y"===e?s()?(a(),m(),i()):i():/^p$/i.test(e)?(h(),i()):/^v$/i.test(e)?(s(!s()),D(),i()):"/"===e?(g(),i()):"n"===e?(w(),i()):"N"===e?(O(),i()):void 0:(a(),C(),i())}},73:function(e,t,n){"use strict";const r=n(7),o=n(74),s=r([]),a=r(0);function i(e,t){return e===t-1?0:++e}function l(e,t){return e?--e:t-1}e.exports.find=(e,t)=>{const n=o(e,t);return s(n),a(0),n},e.exports.findNext=()=>{const e=s(),t=i(a(),e.length);return a(t),e[a()]},e.exports.findPrevious=()=>{const e=s(),t=l(a(),e.length);return a(t),e[t]},e.exports._next=i,e.exports._previous=l},77:function(e,t,n){"use strict";const r=DOM.CurrentInfo,{escapeRegExp:o}=n(10);e.exports=function(e,t){let n,s=0,a=!1,i=0;const l=o(e),c=new RegExp("^"+l+".*$","i"),{files:u}=r,d=t(),f=d.length;for(;i<f&&e===d[i];)i++;i||t([]);const p=s=i;t(t().concat(e));var C;DOM.getFilenames(u).filter(e=>c.test(e)).filter((C=e=>".."===e,e=>!C(e))).some(e=>{const t=DOM.getCurrentByName(e);if(!s)return a=!0,DOM.setCurrentFile(t),!0;p===s&&(n=t),--s}),a||(DOM.setCurrentFile(n),t([e]))}},78:function(e,t,n){"use strict";const r=n(11),o=r.CurrentInfo,{sort:s,order:a}=CloudCmd,i=r.getPanelPosition();let l=s[i];const{getPanel:c}=r;CloudCmd.sortPanel=(e,t=c())=>{const n=t.dataset.name.replace("js-","");e!==l?a[n]="asc":"asc"===a[n]?a[n]="desc":a[n]="asc",l=s[n]=e;const r=n!==o.panelPosition;CloudCmd.refresh({panel:t,noCurrent:r})}}});
//# sourceMappingURL=cloudcmd.js.map